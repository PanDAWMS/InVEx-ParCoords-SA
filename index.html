<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- Set the viewport width to device width for mobile -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

        <title>InVEx</title>
        <link rel="stylesheet" type="text/css"
              href="https://cdn.datatables.net/v/ju-1.12.1/jq-3.3.1/jszip-2.5.0/dt-1.10.20/b-1.6.1/b-colvis-1.6.1/b-flash-1.6.1/b-html5-1.6.1/b-print-1.6.1/datatables.min.css"/>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro&display=swap">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.9/css/select2.min.css"/>

        <link rel="stylesheet" href="assets/css/spa.css">
        <link rel="stylesheet" href="assets/pc/css/ParallelCoordinates.css">
    </head>

    <body>
        <script type="text/javascript" src="https://d3js.org/d3.v3.min.js"></script>
        <script type="text/javascript"
                src="https://cdn.datatables.net/v/ju-1.12.1/jq-3.3.1/jszip-2.5.0/dt-1.10.20/fc-3.3.0/b-1.6.1/b-colvis-1.6.1/b-flash-1.6.1/b-html5-1.6.1/b-print-1.6.1/datatables.min.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
        <script type="text/javascript" src="https://unpkg.com/simple-statistics@6.1.1/dist/simple-statistics.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.19.1/URI.min.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/g/mark.js(jquery.mark.min.js),datatables.mark.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.9/js/select2.full.js"></script>

        <script type="text/javascript" src="assets/js/papaparse.js"></script>
        <script type="text/javascript" src="assets/pc/js/ParallelCoordinates.js"></script>

        <script type="text/javascript" src="assets/js/spa.js"></script>

        <div id="first-page">
            <h1>Parallel Coordinates</h1>
            <p>To show a set of points in an n-dimensional space, a backdrop is drawn consisting of n parallel lines,
                typically vertical and equally spaced. A point in n-dimensional space is represented as a polyline with
                vertices on the parallel axes; the position of the vertex on the i-th axis corresponds to the i-th
                coordinate of the point.
                <br><br>
            </p>

            <p>
                <span>More info about the project can be found at GitHub:</span>
                <a href="https://github.com/PanDAWMS/InVEx-ParCoords-SA">
                    <img src="assets/images/github-logo.png" alt="GitHub repo link" style="height:25px">
                </a>
            </p>

            <div id="latest-load"></div>

            <div id="drop_zone" onclick="document.getElementById('files').click();">
                Drop files here or click here to choose a file
                <input type="file" id="files" name="file" style="display:none;"/>
            </div>
        </div>

        <div id="after-load">
            <div id="header">
                <h1>Parallel Coordinates</h1>
                <p>
                    <a href="https://github.com/PanDAWMS/InVEx-ParCoords-SA">
                        <img src="assets/images/github-logo.png" alt="GitHub repo link" style="height:30px">
                    </a>
                </p>
            </div>
            <hr>
            <div id="contents">
                <div id="color_div">
                    <input type="checkbox" id="scales" name="scales" onchange="colorchange();">
                    <label for="scales">Color by </label>
                </div>

                <div id="ParallelCoordinatesGraph"></div>
            </div>
        </div>

        <script>
            // Setup the dnd listeners.
            var dropZone = document.getElementById('drop_zone');
            dropZone.addEventListener('dragover', handleDragOver, false);
            dropZone.addEventListener('drop', handleFileSelect, false);

            document.getElementById('files').addEventListener('change', handleFileSelect, false);

            let latest = [];
            for(let i = 0; i < 5; i++)
                if(localStorage.getItem('latest_data' + i) !== null)
                    latest.push(JSON.parse(localStorage.getItem('latest_data' + i)));

            if (latest.length > 0){
                d3.select('#latest-load')
                    .append('h3')
                    .text('Load a previous file:');

                d3.select('#latest-load')
                    .selectAll('p')
                    .data(latest)
                    .enter()
                    .append('p')
                        .html((a) => '<b>' + a.file.name + '</b>, ' +
                            formatBytes(a.file.size) + ', loaded at ' + a.file.dateLoaded)
                        .on('click', (a) => loadData(a));
            }
        </script>
    </body>
</html>
